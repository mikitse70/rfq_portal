{% extends 'user_main.html' %} {% block content %}
<div class="container-fluid">
  <div class="row dash-row">
    <div class="col-xl-12">
      <div class="card spur-card">
        <div class="card-header">
          <div class="spur-card-icon">
            <i class="fas fa-cart-arrow-down"></i>
          </div>
          <div class="spur-card-title">Quotation Request</div>
        </div>
        <div class="card-body">
          <form action="" method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="form-row">
              <div class="form-group col-md-4">
                <label for="inputAddress">Item Name</label>
                <input
                  name="item_type"
                  type="text"
                  class="form-control"
                  id="inputAddress"
                  placeholder="item name"
                  required
                />
              </div>
              <div class="form-group col-md-4">
                <label for="inputAddress">Requesition Number</label>
                <input
                  name="request_no"
                  type="text"
                  class="form-control"
                  id="inputAddress"
                  placeholder="requesition number"
                  required
                />
              </div>
              <div class="form-group col-md-4">
                <label for="inputAddress2">Quantity</label>
                <input
                  name="quantity"
                  type="number"
                  class="form-control"
                  id="inputAddress2"
                  placeholder="Quantity"
                  required
                />
              </div>
              <div class="form-group col-md-4">
                <label for="inputAddress2">RFQ reference</label>
                <input
                  name="rfq_ref"
                  type="number"
                  class="form-control"
                  id="inputAddress2"
                  placeholder="rfq reference"
                  required
                />
              </div>

              <div class="form-group col-md-4">
                <label for="inputAddress2">Delivery Place</label>
                <select
                  name="delivery_place"
                  class="form-control"
                  id="inputCity"
                  required
                >
                  <option value="">Choose Location....</option>
                  <option value="Lideta">Lideta</option>
                  <option value="Mekanisa">Mekanisa</option>
                  <option value="Kality">Kality</option>
                  <option value="Ex-Work">Ex-Work</option>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label for="inputPassword4">Description</label>
              <textarea
                name="description"
                id="inputPassword4"
                class="form-control"
                cols="30"
                rows="10"
                required
              ></textarea>
            </div>
            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputCity">Stock Type</label>

                <select
                  name="book_type"
                  class="form-control"
                  id="inputCity"
                  required
                >
                  <option value="">choose ....</option>
                  <option value="Stock">Stock</option>
                  <option value="Non Stock">Non Stock</option>
                </select>
              </div>

              <div class="form-group col-md-6">
                <label for="inputZip">Quotation Submission Deadline</label>
                <input
                  name="deadline_date"
                  type="date"
                  class="form-control"
                  id="datepicker"
                  min="{{ current_date }}"
                  required
                />
              </div>
            </div>

            <div class="form-row">
              <div class="form-group col-md-6">
                <label for="inputZip">Specification</label>
                <div class="custom-file">
                  <input
                    name="specification"
                    type="file"
                    class="custom-file-input"
                    id="inputGroupFile01"
                    onchange="return fileValidation()"
                    required
                  />
                  <label class="custom-file-label" for="inputGroupFile01"
                    >Choose file</label
                  >
                </div>
              </div>

              <div class="form-group col-md-6">
                <label for="inputZip">BOQ</label>
                <div class="custom-file">
                  <input
                    name="boq"
                    type="file"
                    class="custom-file-input"
                    id="inputGroupFile"
                    onchange="return fileValidationn()"
                    required
                  />
                  <label class="custom-file-label" for="inputGroupFile01"
                    >Choose file</label
                  >
                </div>
              </div>
            </div>

            <button name="submit" type="submit" class="btn btn-primary">
              Create
            </button>
          </form>
        </div>
      </div>
    </div>

    <div class="col-xl-12">
      <div class="card spur-card">
        <div class="card-header">
          <div class="spur-card-icon">
            <i class="fas fa-cart-arrow-down"></i>
          </div>
          <div class="spur-card-title">Import Request from Syspro</div>
        </div>
        <div class="card-body">
          <div class="form-row">
            <div class="form-group">
              <a href="../uploads/request_form.xlsx" download>
                Download Form</a
              >
            </div>
          <form
            method="POST"
            action=""
            enctype="multipart/form-data"
          >{% csrf_token %}
           
            </div>
            <div class="form-row">
              <div class="form-group">
                <input type="file" name="excelfile" id="excelfile" />
              </div>

              <div class="form-group">
                <button
                  type="submit"
                  name="importexcel"
                  class="btn btn-primary"
                >
                  Upload
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>

  <script type="text/javascript">
    setTimeout(function () {
      document.getElementById("alert").style.display = "none";
    }, 3000);
  </script>
  <script>
    function fileValidation() {
      var fileInput = document.getElementById("inputGroupFile01");

      var filePath = fileInput.value;

      // Allowing file type
      var allowedExtensions = /(\.jpg|\.jpeg|\.png|\.gif|\.pdf|\.xls|\.xlsx)$/i;

      if (!allowedExtensions.exec(filePath)) {
        alert("Invalid file type, upload file in pdf, image and excell");
        fileInput.value = "";
        return false;
      }
    }
  </script>
  <script>
    function fileValidationn() {
      var fileInput = document.getElementById("inputGroupFile");

      var filePath = fileInput.value;

      // Allowing file type
      var allowedExtensions = /(\.jpg|\.jpeg|\.png|\.gif|\.pdf|\.xls|\.xlsx)$/i;

      if (!allowedExtensions.exec(filePath)) {
        alert("Invalid file type, upload file in pdf, image and excell");
        fileInput.value = "";
        return false;
      }
    }
  </script>
  {% endblock %}
</div>
